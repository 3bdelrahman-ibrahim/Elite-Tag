<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card List</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Add Firebase SDKs -->
    <script type="module">
      // Import the necessary Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
      import {
        getFirestore,
        collection,
        getDocs,
      } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

      // Firebase configuration (replace with your own config)
      const firebaseConfig = {
        apiKey: "AIzaSyABa_88lCPYb9G7C2L350H52UvQGdjNYck",
        appId: "1:507527578334:web:bdb82580e01375de11384f",
        messagingSenderId: "507527578334",
        projectId: "elite-tag-1",
        authDomain: "elite-tag-1.firebaseapp.com",
        storageBucket: "elite-tag-1.appspot.com",
        measurementId: "G-CMZ9Z2TCLM",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Fetch and display card names
      async function fetchAndDisplayCards() {
        try {
          const snapshot = await getDocs(collection(db, "cards"));
          const cardList = document.getElementById("card-list");
          cardList.innerHTML = ""; // Clear any existing content
          snapshot.forEach((doc) => {
            const card = doc.data();
            const cardLink = document.createElement("a");
            cardLink.href = `/id/${doc.id}`; // Use /[cardId] format
            cardLink.textContent = card.name;
            cardLink.style.display = "block";
            cardList.appendChild(cardLink);
          });
        } catch (error) {
          console.error("Error fetching cards: ", error);
        }
      }

      fetchAndDisplayCards();
    </script>
  </head>
  <body>
    <h1>Cards</h1>
    <div id="card-list"></div>
  </body>
  <script>
    window.addEventListener("load", function () {
      var path = window.location.pathname;
      if (path.startsWith("/id/")) {
        window.location.href = "/card.html";
      }
    });
  </script>
</html>
